action:
  - service: tts.google_translate_say
    data:
      entity_id: !input google_devices
      message: !input message

  - delay:
      seconds: "{{ delay }}"

  - choose:
      - conditions:
          - condition: template
            value: "{{ trigger.entity_id }}"
        sequence:
          - service: camera.snapshot
            target:
              entity_id: >
                {% if trigger.entity_id == 'binary_sensor.doorbell_front' %}
                  {{ cameras[0] }}
                {% elif trigger.entity_id == 'binary_sensor.doorbell_back' %}
                  {{ cameras[1] }}
                {% else %}
                  {{ cameras[0] }}  # Fallback, can be adjusted as needed
                {% endif %}
            data:
              filename: "{{ snapshot_create_file_path }}"

  - service: notify.mobile_app
    target:
      device_id: !input notify_devices
    data:
      title: "{{ notification_title }}"
      message: "{{ notification_message }}"
      data:
        image: "{{ snapshot_access_file_path }}"
        priority: high
        timeoutAfter: 10000  # 10 seconds, adjust as needed
